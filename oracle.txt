
create user book_ex IDENTIFIED BY BOOK_EX
dafault tablespace USERS
TEMPORARY TABLESPACE TEMP;

GRANT CONNECT, DBA TO BOOK_EX

SELECT dbms_xdb.gethttpport() FROM dual;

EXEC dbms_xdb.sethttpport(9090);

CREATE SEQUENCE seq_board;

CREATE TABLE tbl_board(
	bno NUMBER(10,0),
	title varchar2(200) NOT NULL,
	content varchar2(2000) NOT NULL,
	writer varchar2(50) NOT NULL,
	regdate DATE DEFAULT sysdate,
	updatedate DATE DEFAULT sysdate
);

ALTER TABLE tbl_board ADD CONSTRAINT pk_board
PRIMARY KEY (bno);

alter table tbl_board add (replycnt NUMBER(10,0) default 0);

create table tbl_reply(
    rno number(10,0),
    bno number(10,0) not null,
    reply varchar2(1000) not null,
    replyer varchar2(50) not null,
    replyDate date default sysdate,
    updatedate date default sysdate
);

create sequence seq_reply;

alter table tbl_reply add constraint pk_reply primary key (rno);

alter table tbl_reply add constraint fk_reply_board
foreign key(bno) references tbl_board(bno);